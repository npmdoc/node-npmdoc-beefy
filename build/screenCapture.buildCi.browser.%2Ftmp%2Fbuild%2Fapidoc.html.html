<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/chrisdickinson/beefy#readme">beefy (v2.1.8)</a>
</h1>
<h4>local development server that aims to make using browserify fast and fun</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy">module beefy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.beefy">
            function <span class="apidocSignatureSpan"></span>beefy
            <span class="apidocSignatureSpan">(opts, ready)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.accumulate_error">
            function <span class="apidocSignatureSpan">beefy.</span>accumulate_error
            <span class="apidocSignatureSpan">(outputError, resp)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.args_to_options">
            function <span class="apidocSignatureSpan">beefy.</span>args_to_options
            <span class="apidocSignatureSpan">(argv, cwd, ready)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.create_handler">
            function <span class="apidocSignatureSpan">beefy.</span>create_handler
            <span class="apidocSignatureSpan">(opts, io, innerHandler)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.extract_port">
            function <span class="apidocSignatureSpan">beefy.</span>extract_port
            <span class="apidocSignatureSpan">(parsed, ready)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.help">
            function <span class="apidocSignatureSpan">beefy.</span>help
            <span class="apidocSignatureSpan">(io)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.make_io">
            function <span class="apidocSignatureSpan">beefy.</span>make_io
            <span class="apidocSignatureSpan">(process, stdout, stderr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.normalize_entry_points">
            function <span class="apidocSignatureSpan">beefy.</span>normalize_entry_points
            <span class="apidocSignatureSpan">(entryPoints)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.setup_bundlers">
            function <span class="apidocSignatureSpan">beefy.</span>setup_bundlers
            <span class="apidocSignatureSpan">(cwd, entryPoints, flags, noWatchify, ready)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.toString">
            function <span class="apidocSignatureSpan">beefy.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.accumulate_error">module beefy.accumulate_error</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.accumulate_error.accumulate_error">
            function <span class="apidocSignatureSpan">beefy.</span>accumulate_error
            <span class="apidocSignatureSpan">(outputError, resp)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.args_to_options">module beefy.args_to_options</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.args_to_options.args_to_options">
            function <span class="apidocSignatureSpan">beefy.</span>args_to_options
            <span class="apidocSignatureSpan">(argv, cwd, ready)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.create_handler">module beefy.create_handler</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.create_handler.create_handler">
            function <span class="apidocSignatureSpan">beefy.</span>create_handler
            <span class="apidocSignatureSpan">(opts, io, innerHandler)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.extract_port">module beefy.extract_port</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.extract_port.extract_port">
            function <span class="apidocSignatureSpan">beefy.</span>extract_port
            <span class="apidocSignatureSpan">(parsed, ready)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.help">module beefy.help</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.help.help">
            function <span class="apidocSignatureSpan">beefy.</span>help
            <span class="apidocSignatureSpan">(io)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.make_io">module beefy.make_io</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.make_io.make_io">
            function <span class="apidocSignatureSpan">beefy.</span>make_io
            <span class="apidocSignatureSpan">(process, stdout, stderr)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.normalize_entry_points">module beefy.normalize_entry_points</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.normalize_entry_points.normalize_entry_points">
            function <span class="apidocSignatureSpan">beefy.</span>normalize_entry_points
            <span class="apidocSignatureSpan">(entryPoints)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.setup_bundlers">module beefy.setup_bundlers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.setup_bundlers.setup_bundlers">
            function <span class="apidocSignatureSpan">beefy.</span>setup_bundlers
            <span class="apidocSignatureSpan">(cwd, entryPoints, flags, noWatchify, ready)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.beefy.toString">module beefy.toString</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.beefy.toString.toString">
            function <span class="apidocSignatureSpan">beefy.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy" id="apidoc.module.beefy">module beefy</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.beefy" id="apidoc.element.beefy.beefy">
        function <span class="apidocSignatureSpan"></span>beefy
        <span class="apidocSignatureSpan">(opts, ready)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function beefy(opts, ready) {
  var io = makeIO(process, process.stdout, process.stderr)

  opts =
    typeof opts === 'string' ? {entries: [opts]} :
    Array.isArray(opts) ? {entries: opts} :
    opts

  opts.cwd = opts.cwd || path.dirname(module.parent)
  opts.entries = opts.entries || []
  opts.bundlerFlags = opts.bundlerFlags || []
  opts.bundler = opts.bundler || null
  opts.quiet = opts.quiet === undefined ? true : opts.quiet
  opts.live = !!opts.live
  opts.watchify = opts.watchify === undefined ? true : opts.watchify

  var args = ['9999']
    , innerHandler

  if(opts.cwd) {
    args.push('--cwd', opts.cwd)
  }

  if(opts.live) {
    args.push('--live')
  }

  if(typeof opts.bundler === 'string') {
    args.push('--bundler', opts.bundler)
  }

  if(opts.index) {
    args.push('--index', opts.index)
  }

  if('watchify' in opts &amp;&amp; !opts.watchify) {
    args.push('--no-watchify')
  }

  args.push('--')
  args = args.concat(opts.bundlerFlags)

  parseArgs(args, opts.cwd, function(err, genOpts) {
    if(err) {
      if(ready) {
        return ready(err)
      }

      throw err
    }

    switch(opts.bundler &amp;&amp; typeof opts.bundler) {
      case 'function':
        genOpts.handler.bundler.command = opts.bundler
        break
      case 'object':
        genOpts.handler.bundler = opts.bundler
        break
    }

    genOpts.handler.entries = fixupEntries(opts.entries)
    genOpts.handler.log = opts.quiet ? false : genOpts.handler.log
    innerHandler = createHandler(genOpts.handler, io, opts.unhandled)
  })

  return handler

  function handler(req, resp) {
    if(!innerHandler) {
      return setTimeout(handler, 0, req, resp)
    }

    innerHandler(req, resp)
  }

  function fixupEntries(entries) {
    return Array.isArray(entries) ? entries.reduce(toObject, {}) : entries

    function toObject(obj, entry) {
      entry = path.resolve(opts.cwd, entry)

      obj[entry
        .replace(opts.cwd, '/')
        .replace('\\', '/')
        .replace(/\/+/g, '/')] = entry

      return obj
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.accumulate_error" id="apidoc.element.beefy.accumulate_error">
        function <span class="apidocSignatureSpan">beefy.</span>accumulate_error
        <span class="apidocSignatureSpan">(outputError, resp)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function accumError(outputError, resp) {
  var stream = through(write, end)
    , error = []

  return stream

  function write(buf) {
    error.push(buf)
  }

  function end() {
    if(error.length) {
      var buffers = []

      for(var i = 0; i &lt; error.length; ++i) {
        buffers.push(Buffer(error[i]))
      }

      outputError(Buffer.concat(buffers))
      resp.end(
          '(' + DOMError + ')(' + JSON.stringify(error + '') + ')'
      )
    }

    stream.queue(null)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.args_to_options" id="apidoc.element.beefy.args_to_options">
        function <span class="apidocSignatureSpan">beefy.</span>args_to_options
        <span class="apidocSignatureSpan">(argv, cwd, ready)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(argv, cwd, ready) {
  var idx = argv.length
    , nestLevel = 0

  for(var i = 0, len = argv.length; i &lt; len; ++i) {
    if(argv[i] === '[') {
      ++nestLevel
    } else if(argv[i] === ']') {
      --nestLevel
    }

    if(argv[i] === '--' &amp;&amp; !nestLevel) {
      idx = i

      break
    }
  }

  var parsed = minimist(argv.slice(0, idx))
    , bundlerFlags = argv.slice(idx + 1)
    , legacyBundlerMode = false
    , entryPoints

  // open options
  parsed.open = parsed.o || parsed.open
  parsed.url = parsed.u || parsed.url || parsed.open
  parsed.help = parsed.h || parsed.help
  parsed.port = parsed.p || parsed.port

  // handler options
  parsed.cwd = parsed.cwd || cwd
  parsed.live = parsed.l || parsed.live
  parsed.debug = parsed.d || parsed.debug
  parsed.bundler = parsed.browserify || parsed.bundler
  parsed.watchify = parsed.watchify === undefined ? true : parsed.watchify
  parsed.index = parsed.i || parsed.index

  if(!parsed.bundler &amp;&amp; parsed.debug !== 'false') {
    if(bundlerFlags.indexOf('-d') === -1) {
      bundlerFlags.unshift('-d')
    }
  }

  extractPort(parsed, ongotport)

  function ongotport(err, port, remain) {
    entryPoints = normalizeEntryPoints(remain)
    parsed.port = port

    if(parsed.bundler) {
      legacyBundlerMode = true

      return onbundler(null, parsed.bundler)
    }

    setupBundler(
        cwd
      , entryPoints
      , bundlerFlags
      , !parsed.watchify
      , onbundler
    )
  }

  function onbundler(err, bundler) {
    if(err) {
      return ready(err)
    }

    parsed.bundler = bundler

    return buildOutput()
  }

  function buildOutput() {
    var openOptions = {
        openURL: (typeof parsed.url === 'string' &amp;&amp; parsed.url) ||
                 ('http://127.0.0.1:' + parsed.port)
      , openBrowser: !!(parsed.open || parsed.url)
      , showHelp: !!parsed.help
      , port: parsed.port
    }

    var hasColor = {
        color: parsed.color === undefined || parsed.color
    }

    var handlerOptions = {
        live: parsed.live ? {rate: 2000} : false
      , generatedIndex: parsed.index
      , entries: entryPoints
      , log: hasColor
      , cwd: parsed.cwd
      , realCwd: cwd
    }

    handlerOptions.bundler = {
        command: parsed.bundler
      , flags: bundlerFlags
      , legacy: legacyBundlerMode
    }

    ready(null, {
        handler: handlerOptions
      , open: openOptions
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.create_handler" id="apidoc.element.beefy.create_handler">
        function <span class="apidocSignatureSpan">beefy.</span>create_handler
        <span class="apidocSignatureSpan">(opts, io, innerHandler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createServer(opts, io, innerHandler) {
  var handlers
    , handler
    , inner

  // order is important here. the higher
  // in the list, the deeper the handler
  // is in the resolution order.
  handlers = [
      defaultIndex
    , serveStatic
    , legacyBundle
    , modernBundle
    , logRequests
    , liveReload
  ]

  handler = innerHandler || _404

  inner = handlers.reduce(function(lhs, rhs) {
    return rhs(opts, io, lhs)
  }, handler)

  return beefyMainHandler

  function beefyMainHandler(req, resp) {
    var parsed = url.parse(req.url, true)

    return inner(this, req, resp, parsed)
  }

  function _404(server, req, resp, parsed) {
    resp.writeHead(404, {'content-type': 'text/plain'})
    resp.end('not found ):')
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.extract_port" id="apidoc.element.beefy.extract_port">
        function <span class="apidocSignatureSpan">beefy.</span>extract_port
        <span class="apidocSignatureSpan">(parsed, ready)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function extractPort(parsed, ready) {
  var remain
    , port

  remain = parsed._.slice()
  port = parsed.port

  if(!isNaN(+remain[remain.length - 1]) &amp;&amp; !parsed.port) {
    port = +remain[remain.length - 1]
    remain = remain.slice(0, -1)
  }

  if(port) {
    return ready(null, port, remain)
  }

  portfinder.basePort = 9966
  portfinder.getPort(function onport(err, port) {
    if(err) {
      return ready(err)
    }

    return ready(null, port, remain)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.help" id="apidoc.element.beefy.help">
        function <span class="apidocSignatureSpan">beefy.</span>help
        <span class="apidocSignatureSpan">(io)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function help(io) {
<span class="apidocCodeCommentSpan">/*
beefy path/to/entry.js[:as.js] [PORT] -- [arguments to forward to bundler]

  Spins up a development server on ``http://localhost:PORT`` for working
  with static files and browserifiable JavaScript modules.

  If there's a path it doesn't recognize, it will serve up an empty HTML
  file with your javascript entry point included as a script tag.
  Otherwise you can provide your own ``index.html``.

  All arguments after ``--`` are forwarded to the ``browserify-command``.

  When the browser requests your entry point, it will run
  ``browserify-command`` with the forwarded arguments on the file and pipe
  the results into the response.

  If no PORT is defined, it defaults to 9966.

  If you specify your file in the form ``realfile.js:as-file.js``, any
  request to ``as-file.js`` will browserify ``realfile.js`` and return
  it as the output.

  arguments:

    --browserify command        The command to run to compile your
                                entry point. If not provided,
                                defaults to ``./node_modules/.bin/browserify``
                                and falls back to ``which browserify``
                                if that's not available.

    --live                      Enable live reloading. Reloads the page
                                every time your JavaScript changes.

    --cwd dir                   Serve files as if run from ``dir``.

    --open                      Automatically discover an open port, and
                                open the resulting URL in your
                                default browser.

    --index file                Use a different autogeneration template
                                for index.html.
*/
</span>
  var str = help + ''

  io.error(str.slice(str.indexOf('/*') + 3, str.indexOf('*/')))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.make_io" id="apidoc.element.beefy.make_io">
        function <span class="apidocSignatureSpan">beefy.</span>make_io
        <span class="apidocSignatureSpan">(process, stdout, stderr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeIO(process, stdout, stderr) {
  stdout = stdout || process.stdout
  stderr = stderr || process.stderr

  return {
      isTTY: process.stdout.isTTY
    , error: outputError
    , log: outputLog
  }

  function outputLog(what) {
    stdout.write(what)
    stdout.write('\n')
  }

  function outputError(what) {
    stderr.write(what)
    stderr.write('\n')
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.normalize_entry_points" id="apidoc.element.beefy.normalize_entry_points">
        function <span class="apidocSignatureSpan">beefy.</span>normalize_entry_points
        <span class="apidocSignatureSpan">(entryPoints)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizeEntryPoints(entryPoints) {
  // entryPoint ::= file ":" repr
  //              | ":" repr
  //              | file
  //
  // file ::= relativePath
  //        | absolutePath
  //        | implicitRelativePath
  //
  // relativePath ::= "." path
  //
  // absolutePath ::= &lt;path-sep&gt; path
  //
  // implicitRelativePath ::= path
  //
  // path ::= [^\s]+
  //
  // repr ::= [^\s]+
  // -------------------------
  // output is `{repr: path, ...}`.
  // repr's *always* use `/`.
  // path's *may* use `\`.

  var output = {}

  for(var i = 0, len = entryPoints.length; i &lt; len; ++i) {
    addEntryPoint(output, entryPoints[i])
  }

  return output
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.setup_bundlers" id="apidoc.element.beefy.setup_bundlers">
        function <span class="apidocSignatureSpan">beefy.</span>setup_bundlers
        <span class="apidocSignatureSpan">(cwd, entryPoints, flags, noWatchify, ready)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setupBundler(cwd, entryPoints, flags, noWatchify, ready) {
  noWatchify ?
    onlocalwatchify() :
    resolve('watchify', {basedir: cwd}, onlocalwatchify)

  function onlocalwatchify(err, localDir) {
    if(err || !localDir) {
      return resolve('browserify', {basedir: cwd}, onlocalbrowserify)
    }

    setupWatchify(path.dirname(localDir), entryPoints, flags, ready)
  }

  function onlocalbrowserify(err, localDir) {
    if(err || !localDir) {
      return findGlobals(onglobals)
    }

    setupBrowserify(path.dirname(localDir), entryPoints, flags, ready)
  }

  function onglobals(err, dirs) {
    if(err) {
      return ready(err)
    }

    dirs = dirs.sort()

    for(var i = 0, len = dirs.length; i &lt; len; ++i) {
      if(!noWatchify &amp;&amp; path.basename(dirs[i]) === 'watchify') {
        return setupWatchify(dirs[i], entryPoints, flags, ready)
      }

      if(path.basename(dirs[i]) === 'browserify') {
        return setupBrowserify(dirs[i], entryPoints, flags, ready)
      }
    }

    return ready(new Error('Could not find a suitable bundler!'))
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.beefy.toString" id="apidoc.element.beefy.toString">
        function <span class="apidocSignatureSpan">beefy.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.accumulate_error" id="apidoc.module.beefy.accumulate_error">module beefy.accumulate_error</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.accumulate_error.accumulate_error" id="apidoc.element.beefy.accumulate_error.accumulate_error">
        function <span class="apidocSignatureSpan">beefy.</span>accumulate_error
        <span class="apidocSignatureSpan">(outputError, resp)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function accumError(outputError, resp) {
  var stream = through(write, end)
    , error = []

  return stream

  function write(buf) {
    error.push(buf)
  }

  function end() {
    if(error.length) {
      var buffers = []

      for(var i = 0; i &lt; error.length; ++i) {
        buffers.push(Buffer(error[i]))
      }

      outputError(Buffer.concat(buffers))
      resp.end(
          '(' + DOMError + ')(' + JSON.stringify(error + '') + ')'
      )
    }

    stream.queue(null)
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.args_to_options" id="apidoc.module.beefy.args_to_options">module beefy.args_to_options</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.args_to_options.args_to_options" id="apidoc.element.beefy.args_to_options.args_to_options">
        function <span class="apidocSignatureSpan">beefy.</span>args_to_options
        <span class="apidocSignatureSpan">(argv, cwd, ready)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parse(argv, cwd, ready) {
  var idx = argv.length
    , nestLevel = 0

  for(var i = 0, len = argv.length; i &lt; len; ++i) {
    if(argv[i] === '[') {
      ++nestLevel
    } else if(argv[i] === ']') {
      --nestLevel
    }

    if(argv[i] === '--' &amp;&amp; !nestLevel) {
      idx = i

      break
    }
  }

  var parsed = minimist(argv.slice(0, idx))
    , bundlerFlags = argv.slice(idx + 1)
    , legacyBundlerMode = false
    , entryPoints

  // open options
  parsed.open = parsed.o || parsed.open
  parsed.url = parsed.u || parsed.url || parsed.open
  parsed.help = parsed.h || parsed.help
  parsed.port = parsed.p || parsed.port

  // handler options
  parsed.cwd = parsed.cwd || cwd
  parsed.live = parsed.l || parsed.live
  parsed.debug = parsed.d || parsed.debug
  parsed.bundler = parsed.browserify || parsed.bundler
  parsed.watchify = parsed.watchify === undefined ? true : parsed.watchify
  parsed.index = parsed.i || parsed.index

  if(!parsed.bundler &amp;&amp; parsed.debug !== 'false') {
    if(bundlerFlags.indexOf('-d') === -1) {
      bundlerFlags.unshift('-d')
    }
  }

  extractPort(parsed, ongotport)

  function ongotport(err, port, remain) {
    entryPoints = normalizeEntryPoints(remain)
    parsed.port = port

    if(parsed.bundler) {
      legacyBundlerMode = true

      return onbundler(null, parsed.bundler)
    }

    setupBundler(
        cwd
      , entryPoints
      , bundlerFlags
      , !parsed.watchify
      , onbundler
    )
  }

  function onbundler(err, bundler) {
    if(err) {
      return ready(err)
    }

    parsed.bundler = bundler

    return buildOutput()
  }

  function buildOutput() {
    var openOptions = {
        openURL: (typeof parsed.url === 'string' &amp;&amp; parsed.url) ||
                 ('http://127.0.0.1:' + parsed.port)
      , openBrowser: !!(parsed.open || parsed.url)
      , showHelp: !!parsed.help
      , port: parsed.port
    }

    var hasColor = {
        color: parsed.color === undefined || parsed.color
    }

    var handlerOptions = {
        live: parsed.live ? {rate: 2000} : false
      , generatedIndex: parsed.index
      , entries: entryPoints
      , log: hasColor
      , cwd: parsed.cwd
      , realCwd: cwd
    }

    handlerOptions.bundler = {
        command: parsed.bundler
      , flags: bundlerFlags
      , legacy: legacyBundlerMode
    }

    ready(null, {
        handler: handlerOptions
      , open: openOptions
    })
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.create_handler" id="apidoc.module.beefy.create_handler">module beefy.create_handler</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.create_handler.create_handler" id="apidoc.element.beefy.create_handler.create_handler">
        function <span class="apidocSignatureSpan">beefy.</span>create_handler
        <span class="apidocSignatureSpan">(opts, io, innerHandler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createServer(opts, io, innerHandler) {
  var handlers
    , handler
    , inner

  // order is important here. the higher
  // in the list, the deeper the handler
  // is in the resolution order.
  handlers = [
      defaultIndex
    , serveStatic
    , legacyBundle
    , modernBundle
    , logRequests
    , liveReload
  ]

  handler = innerHandler || _404

  inner = handlers.reduce(function(lhs, rhs) {
    return rhs(opts, io, lhs)
  }, handler)

  return beefyMainHandler

  function beefyMainHandler(req, resp) {
    var parsed = url.parse(req.url, true)

    return inner(this, req, resp, parsed)
  }

  function _404(server, req, resp, parsed) {
    resp.writeHead(404, {'content-type': 'text/plain'})
    resp.end('not found ):')
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.extract_port" id="apidoc.module.beefy.extract_port">module beefy.extract_port</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.extract_port.extract_port" id="apidoc.element.beefy.extract_port.extract_port">
        function <span class="apidocSignatureSpan">beefy.</span>extract_port
        <span class="apidocSignatureSpan">(parsed, ready)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function extractPort(parsed, ready) {
  var remain
    , port

  remain = parsed._.slice()
  port = parsed.port

  if(!isNaN(+remain[remain.length - 1]) &amp;&amp; !parsed.port) {
    port = +remain[remain.length - 1]
    remain = remain.slice(0, -1)
  }

  if(port) {
    return ready(null, port, remain)
  }

  portfinder.basePort = 9966
  portfinder.getPort(function onport(err, port) {
    if(err) {
      return ready(err)
    }

    return ready(null, port, remain)
  })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.help" id="apidoc.module.beefy.help">module beefy.help</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.help.help" id="apidoc.element.beefy.help.help">
        function <span class="apidocSignatureSpan">beefy.</span>help
        <span class="apidocSignatureSpan">(io)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function help(io) {
<span class="apidocCodeCommentSpan">/*
beefy path/to/entry.js[:as.js] [PORT] -- [arguments to forward to bundler]

  Spins up a development server on ``http://localhost:PORT`` for working
  with static files and browserifiable JavaScript modules.

  If there's a path it doesn't recognize, it will serve up an empty HTML
  file with your javascript entry point included as a script tag.
  Otherwise you can provide your own ``index.html``.

  All arguments after ``--`` are forwarded to the ``browserify-command``.

  When the browser requests your entry point, it will run
  ``browserify-command`` with the forwarded arguments on the file and pipe
  the results into the response.

  If no PORT is defined, it defaults to 9966.

  If you specify your file in the form ``realfile.js:as-file.js``, any
  request to ``as-file.js`` will browserify ``realfile.js`` and return
  it as the output.

  arguments:

    --browserify command        The command to run to compile your
                                entry point. If not provided,
                                defaults to ``./node_modules/.bin/browserify``
                                and falls back to ``which browserify``
                                if that's not available.

    --live                      Enable live reloading. Reloads the page
                                every time your JavaScript changes.

    --cwd dir                   Serve files as if run from ``dir``.

    --open                      Automatically discover an open port, and
                                open the resulting URL in your
                                default browser.

    --index file                Use a different autogeneration template
                                for index.html.
*/
</span>
  var str = help + ''

  io.error(str.slice(str.indexOf('/*') + 3, str.indexOf('*/')))
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.make_io" id="apidoc.module.beefy.make_io">module beefy.make_io</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.make_io.make_io" id="apidoc.element.beefy.make_io.make_io">
        function <span class="apidocSignatureSpan">beefy.</span>make_io
        <span class="apidocSignatureSpan">(process, stdout, stderr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function makeIO(process, stdout, stderr) {
  stdout = stdout || process.stdout
  stderr = stderr || process.stderr

  return {
      isTTY: process.stdout.isTTY
    , error: outputError
    , log: outputLog
  }

  function outputLog(what) {
    stdout.write(what)
    stdout.write('\n')
  }

  function outputError(what) {
    stderr.write(what)
    stderr.write('\n')
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.normalize_entry_points" id="apidoc.module.beefy.normalize_entry_points">module beefy.normalize_entry_points</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.normalize_entry_points.normalize_entry_points" id="apidoc.element.beefy.normalize_entry_points.normalize_entry_points">
        function <span class="apidocSignatureSpan">beefy.</span>normalize_entry_points
        <span class="apidocSignatureSpan">(entryPoints)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function normalizeEntryPoints(entryPoints) {
  // entryPoint ::= file ":" repr
  //              | ":" repr
  //              | file
  //
  // file ::= relativePath
  //        | absolutePath
  //        | implicitRelativePath
  //
  // relativePath ::= "." path
  //
  // absolutePath ::= &lt;path-sep&gt; path
  //
  // implicitRelativePath ::= path
  //
  // path ::= [^\s]+
  //
  // repr ::= [^\s]+
  // -------------------------
  // output is `{repr: path, ...}`.
  // repr's *always* use `/`.
  // path's *may* use `\`.

  var output = {}

  for(var i = 0, len = entryPoints.length; i &lt; len; ++i) {
    addEntryPoint(output, entryPoints[i])
  }

  return output
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.setup_bundlers" id="apidoc.module.beefy.setup_bundlers">module beefy.setup_bundlers</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.setup_bundlers.setup_bundlers" id="apidoc.element.beefy.setup_bundlers.setup_bundlers">
        function <span class="apidocSignatureSpan">beefy.</span>setup_bundlers
        <span class="apidocSignatureSpan">(cwd, entryPoints, flags, noWatchify, ready)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function setupBundler(cwd, entryPoints, flags, noWatchify, ready) {
  noWatchify ?
    onlocalwatchify() :
    resolve('watchify', {basedir: cwd}, onlocalwatchify)

  function onlocalwatchify(err, localDir) {
    if(err || !localDir) {
      return resolve('browserify', {basedir: cwd}, onlocalbrowserify)
    }

    setupWatchify(path.dirname(localDir), entryPoints, flags, ready)
  }

  function onlocalbrowserify(err, localDir) {
    if(err || !localDir) {
      return findGlobals(onglobals)
    }

    setupBrowserify(path.dirname(localDir), entryPoints, flags, ready)
  }

  function onglobals(err, dirs) {
    if(err) {
      return ready(err)
    }

    dirs = dirs.sort()

    for(var i = 0, len = dirs.length; i &lt; len; ++i) {
      if(!noWatchify &amp;&amp; path.basename(dirs[i]) === 'watchify') {
        return setupWatchify(dirs[i], entryPoints, flags, ready)
      }

      if(path.basename(dirs[i]) === 'browserify') {
        return setupBrowserify(dirs[i], entryPoints, flags, ready)
      }
    }

    return ready(new Error('Could not find a suitable bundler!'))
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.beefy.toString" id="apidoc.module.beefy.toString">module beefy.toString</a></h1>


    <h2>
        <a href="#apidoc.element.beefy.toString.toString" id="apidoc.element.beefy.toString.toString">
        function <span class="apidocSignatureSpan">beefy.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function toString() { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>